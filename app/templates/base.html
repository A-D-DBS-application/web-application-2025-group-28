<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fleet 360</title>

  <!-- Bootstrap -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
  
  <!-- Bootstrap Icons -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
  >

  <!-- Your main stylesheet -->
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/style.css') }}?v=34"
  >
</head>
<body>
  <!-- Mobiele onderbalk navigatie (alleen zichtbaar op kleine schermen) -->
  <nav class="mobile-nav d-md-none">
    <a href="{{ url_for('dashboard.dashboard') }}" class="mobile-nav-item {% if request.endpoint=='dashboard.dashboard' %}active{% endif %}">
      <span class="mobile-nav-icon"><i class="bi bi-list"></i></span>
      <span class="mobile-nav-label">Dashboard</span>
    </a>
    <a href="{{ url_for('materiaal.materiaal') }}" class="mobile-nav-item {% if request.endpoint=='materiaal.materiaal' %}active{% endif %}">
      <span class="mobile-nav-icon">{% include 'partials/material_icon.html' with context %}</span>
      <span class="mobile-nav-label">Materiaal</span>
    </a>
    <a href="{{ url_for('werven.werven') }}" class="mobile-nav-item {% if request.endpoint in ['werven.werven', 'werven.werf_detail'] %}active{% endif %}">
      <span class="mobile-nav-icon"><i class="bi bi-geo-alt"></i></span>
      <span class="mobile-nav-label">Werven</span>
    </a>
    <a href="{{ url_for('keuringen.keuringen') }}" class="mobile-nav-item {% if request.endpoint=='keuringen.keuringen' %}active{% endif %}">
      <span class="mobile-nav-icon"><i class="bi bi-check-circle"></i></span>
      <span class="mobile-nav-label">Keuringen</span>
    </a>
    <a href="{{ url_for('documenten') }}" class="mobile-nav-item {% if request.endpoint=='documenten' %}active{% endif %}">
      <span class="mobile-nav-icon">{% include 'partials/documenten_icon.html' with context %}</span>
      <span class="mobile-nav-label">Docs</span>
    </a>
  </nav>

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-top">
      <!-- Brand / Logo -->
      <div class="brand">
        <img
          src="{{ url_for('static', filename='img/logo.png.png') }}"
          alt="VT-Invest Group"
          class="brand-logo"
        >
      </div>

      <!-- Navigation -->
      <nav class="menu">
        <a
          class="menu-item {% if request.endpoint=='dashboard.dashboard' %}active{% endif %}"
          href="{{ url_for('dashboard.dashboard') }}"
        >
          <span class="menu-item-icon"><i class="bi bi-list"></i></span>
          Overzicht
        </a>

        <a
          class="menu-item {% if request.endpoint=='materiaal.materiaal' %}active{% endif %}"
          href="{{ url_for('materiaal.materiaal') }}"
        >
          <span class="menu-item-icon">{% include 'partials/material_icon.html' with context %}</span>
          Materiaal
        </a>

        <a
          class="menu-item {% if request.endpoint in ['werven.werven', 'werven.werf_detail'] %}active{% endif %}"
          href="{{ url_for('werven.werven') }}"
        >
          <span class="menu-item-icon"><i class="bi bi-geo-alt"></i></span>
          Werven
        </a>

        <a
          class="menu-item {% if request.endpoint=='keuringen.keuringen' %}active{% endif %}"
          href="{{ url_for('keuringen.keuringen') }}"
        >
          <span class="menu-item-icon"><i class="bi bi-check-circle"></i></span>
          Keuringen
        </a>

        <a
          class="menu-item {% if request.endpoint=='documenten' %}active{% endif %}"
          href="{{ url_for('documenten') }}"
        >
          <span class="menu-item-icon">{% include 'partials/documenten_icon.html' with context %}</span>
          Documenten
        </a>
      </nav>
    </div>

    <!-- User info bottom -->
    <div class="sidebar-bottom">
      <div class="user-card">
        <div class="avatar">
          {% if current_user and current_user.Naam %}
            {% set naam_delen = current_user.Naam.split() %}
            {% if naam_delen|length >= 2 %}
              {{ (naam_delen[0][0] + naam_delen[-1][0]) | upper }}
            {% else %}
            {{ current_user.Naam[:2] | upper }}
            {% endif %}
          {% else %}
            VT
          {% endif %}
        </div>
        <div>
          <div class="user-name">
            {{ current_user.Naam if current_user and current_user.Naam else 'Naam Gebruiker' }}
          </div>
          <div class="user-role">
            {{ current_user.Functie if current_user and current_user.Functie else 'Functie' }}
          </div>
          <div class="mt-2">
            {% if current_user %}
              <a
                href="{{ url_for('auth.logout') }}"
                class="small text-decoration-none"
              >
                Uitloggen
              </a>
            {% else %}
              <a
                href="{{ url_for('login') }}"
                class="small text-decoration-none me-2"
              >
                Inloggen
              </a>
              <a
                href="{{ url_for('signup') }}"
                class="small text-decoration-none"
              >
                Registreren
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </aside>

  <!-- Main content -->
  <main class="main">
    <!-- Top bar -->
    <header class="topbar">
      <div class="app-title">Fleet 360</div>
      <!-- Mobiel logo rechtsboven (zichtbaar op kleine schermen) -->
      <img
        src="{{ url_for('static', filename='img/logo.png.png') }}"
        alt="VT-Invest Group"
        class="topbar-logo-mobile d-md-none"
      >
    </header>

    <!-- Flash messages -->
    <div class="container mt-3">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for cat, msg in messages %}
            <div class="alert alert-{{ 'warning' if cat=='warn' else cat }} py-2 my-2">
              {{ msg }}
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}
    </div>

    <!-- Page content -->
    <section class="page">
      {% block content %}{% endblock %}
    </section>
  </main>

  {% include 'partials/footer.html' %}

  <!-- Bootstrap JS -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
  ></script>

  <!-- Auto-hide flash messages -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const alerts = document.querySelectorAll('.container .alert');
      alerts.forEach(function(alert) {
        setTimeout(function() {
          alert.classList.add('alert-fade-out');
          setTimeout(function() {
            alert.remove();
          }, 500); // Verwijder na fade animatie (0.5s)
        }, 6000); // Start fade na 6 seconden
      });
    });
  </script>
</body>
</html>
